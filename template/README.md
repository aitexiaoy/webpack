# fireFighting_train

> 消防培训项目

## Build Setup

``` bash
# install dependencies
npm install

# serve with hot reload at localhost:8080
npm run dev

# build for production with minification
npm run build

# build for production and view the bundle analyzer report
npm run build --report
```

### 主要目录结构

```
network-company        联网单位模块
alarmdeal              告警处理模块
system-manage          系统管理模块
public-firecock        室内消火栓模块

```


### 2018-3-23
```
1.增加基础按钮组件
2.修改基本信息显示组件
3.增加分页组件
```

### 2018-3-24
```
1.增加消息提示组件
2.增加公共的弹框组件
3.增加路由文件
4.增加表头配置组件
```

### 2018-3-25
```
1.增加表格组件
```

### 2018-3-26
```
1.增加自定义导航
2.增加搜索组件
3.增加部件筛选组件
```


### 2018-4-17
```
1.关于选择框，用一个字段标记是本地字典表，数据库字段表，本地动态数据表，默认远程字典表
  list_source:'remote|local|dyna'   数据库字段表|本地字典表|动态获取数据

2.
```

### 2018-4-23
1.修改date组件提交日期格式不对问题,
2.修改修改系统时获取不到参数Bug

4.修改表单校验规则，整理表单字段key

type=new|edit
```javascript

//新增，编辑表单字段说明
{
  id:'',        // String
  name:'',      // String
  value:'',     // String
  type:'input|select|date|select-pick|img|select_radio',      //String 表单类型
  check_type:'',       //String 校验规则
  placeholder:'',    //String 提示信息
  unit:'',          //String 单位
  options:[],       //String 选择框数据 {id:'',name:''}
  disabled:false,          //boolean 编辑的时候是否禁止编辑       默认false
  new_show:true,         //boolean 控制新增的时候是否显示    默认true
  edit_show:true,        //boolean 控制编辑的时候是否显示    默认true
  new_disabled:false,     //boolean 新增的时候禁止用户输入   默认false
  slot:'',                // String 扩展插槽，用来扩展某些特殊的from表单
  jpath:'',               //取值路径
  expand:{                  //boolean 扩展字段,当常规字段不能满足需求的时候采用扩展字段
      list_source:'remote|local|dyna',     //表格采用 字典获取方式 数据库字段表|本地字典表|动态获取数据
      limit:1,    //图片采用 最大限制张数
      from_no_name:true,   //有这个字段的时候from表单插槽直接插到这一行,与slot一起使用

  }       
}

```
### 2018-4-24
```
1.修改页面刷新的时候请求列表函数请求多次的Bug
```

### 2018-4-25
```
1.处理表格筛选项，可以清空搜索项了
2.修改建筑编辑，系统编辑返回后显示逻辑
3.修改联网单位信息编辑成功后列表自动刷新
4.修改相关校验关系
5.修改在新增的时候为下一步，在编辑时为完成逻辑
6.修改新增设备时数据问题
7.修改用户管理中图片限制
```
### 2018-4-26
```
1.修改新增编辑组件，编辑的时候数据部分提交
2.修改人员信息部分相关Bug
3.增加设备管理中报警主机管理逻辑，
```

### 2018-4-27
```
1.修改系统管理中数量，容量的校验方式
```


### 2018-05-02
```
1.修改系统中因为数据字典结构所导致的一系列Bug,
2.修改人员管理中密码项的处理方式
3.修改身份证号的处理方式
4.修改在编辑信息时，刚进入页面切换tab,页面编辑弹框问题
5.新增系统选择类型后自动填充名称
6.修改fb-img组件（侯雪莲）
7.给fb-select增加单位（王凯）
```

### 2018-5-04
```
1.开发建筑楼层管理
2.为dialog组件添加滚动条
```
### 2018-05-05
```
1.添加fb-help-tooltip 消息说明 全局组件  用法参见ele-tooltip组件  
2.添加fb-icon-itemclose 关闭图标 全局组件
3.添加fb-icon-itemadd 添加图标 全局组件
4.修改fb-from组件，取消在form组件中进行校验，将校验放到from的父组件中,优化form组件参数传递
5.将base-page-new改成全局组件，fb-base-pagenew  用于新增，编辑二级页面。
```
### 2018-05-09
```
1.告警处理列表
2.告警处理关注操作
3.告警处理屏蔽操作
```

### 2018-05-10
```
1.告警处理列表优化
2.屏蔽操作
3.告警数据前端处理分页，折叠
```

### 2018-05-12
```
1.增加告警详情，
2.增加部件详情
3.增加设备详情
```

### 2018-05-15
```
1.修改同一个图片修改图片不变Bug
2.修改部件管理中的处理逻辑，部分函数采用昨天抽离出来的公共方法
3.修改设备，部件，报警主机的新建部分数据(今天接口大部分时间在调消火栓的，这块暂时还没联调)
```

```
device_map_flag   表格中是否绑定标记
```

//待完成
1.修改获取平面图接口表名
3.校验放到顶层组件中
4.地址自动获取
5.删除系统检测是否有部件


### 2018-9-14
```
1.版本V1.0正式上线
```

### 2018-9-27
```
// @by yangpeng
1.修改底层basepagenew中格式化数据对编辑的判断，disabled为false的才提交
2.修改编辑设备中mac地址处理的Bug
3.编辑设备页面主机接入方式修改为可编辑
4.修改定位平面图 component_img获取楼层直接从路由中取
5.修改消火栓告警中的批量处理
```
### 2018-9-30
```
// @by yangpeng
1.修改消防设施平面图中三维图的图标问题
```

### 2018-10-10
```
// @by weiguifei
1.修改部件getHeaders的参数 解决thing_id 报错
2.部件关联位置 新增动画
```

### 2018-10-12
```
// @by weiguifei
1. 新增 awe-dnd 插件 用于报警受理统计的拖拽
2.部件关联位置 新增动画
```

### 2018-10-13
```
// @by chenglulu
1. 高德地图3d完成
```

### 2018-10-16
```
// @by weiguifei
1. 人员定位（除 导出功能）
2. 物联网设备 楼层+建筑 筛选
```

### 2018-10-17
```
// @by weiguifei
1. 人员定位 导出功能;
2. 关联部件图 打点的 关闭点按钮偏移
```

### 2018-10-17
```
// @by chenglulu
1. 注册流程及修改密码忘记密码流程手机号验证码问题及密码长度错误依然可以提交的问题
2. 蜂鸟地图卡片定位以及添加loading
```

### 2018-10-18
```
// @by weiguifei
1. 左侧单位列表 删除 info_company 一层
2. 巡查  巡查点二维码生成规则修改
3. 人员定位 下拉菜单
4. 悬浮球 详情展开判断
```

### 2018-10-18
```
// @by chenglulu
1. 消防设施平面图高德地图点击卡片显示问题
2. 报警列表点击定位平面图3d地图模型楼层id和index获取
```

### 2018-10-19
```
// @by weiguifei
1. 套餐购买页面 新增切换单位 展开收起动画 优化体验
```

### 2018-10-20
```
// @by weiguifei
1. 批量导入修改
```

### 2018-10-22
```
// @by weiguifei
1. 批量导入加入进度条
```

### 2018-10-23
```
// @by weiguifei
1. 批量导入加入进度条
2. 人员定位 友好input
3. 官网首页动画
4. 设备部件新增解耦
```


### 2018-10-24
```
@by yangpeng
1.修改gis获取部件报错问题 bug单1851
2.解决编辑设备时报floor_id错误问题
3.增加基本信息显示组件
4.修改底层from组件，增加一个插槽并修改与之联系的相关页面
```

### 2018-10-26
```
@by yangpeng
1.修改后台管理系统中2个模块(套餐管理、平台管理)代码，抽离出公共组件
```

### 2018-10-29
```
@by yangpeng
1.修改Bug单1870 采样频率修改不成功Bug
2.修改Bug单1850  切换单位物联网设备筛选不清空问题  [物联网设备、报警历史、账号信息、维保管理]
3.修改Bug单1843  建筑信息中文字限制
4.修改Bug单1833  新建建筑成功后的跳转问题
5.修改Bug单1826 消防设施新增重置关联

@by jingmingdong
1.修改批量导入提示信息 bug 1878
2.top_nav 获取vuex company_name 数据不随动 进行修改  bug1873
3.IE下 隐患模块 出现样式问题进行修改


@by wangkai
1.修改消防设施部件图 新增平面图时，相关必填项表单验证问题 bug1875。
2.解决从物联网设备 部件详情中，删除当前部件，报错缺少device type参数问题 bug1876

```

### 2018-10-30
```
@by yangpeng
1.增加页面中所有列表项点击后跳转到相应的详情
2.消防设施部件图中的联动
3.部分组件的修改
```

### 2018-10-30
```
@by weiguifei
1.巡检导出  修改为 超出3个月 禁止导出 范围修正
```

### 2018-11-1
```
@by yangpeng
1.修改建筑信息编辑的时候区域与地址拼接问题
2.修改消防设施部件图中统计数据部件总数取值问题
```

### 2018-11-7
```
@by yangpeng
1.修改设备关联页面逻辑
2.修改消防设施部件图的地图显示
3.增加报警受理中设备的联网状态、设备状态
4.增加物联网设备中的联网状态、设备状态
5.修改消火栓详情中的显示字段 产品状态->联网状态，增加设备状态
6.修改接口的原子封装
```


### 2018-11-8
```
@by yangpeng
1.注释掉所有暂未认证
2.报警主机取消在线状态
3.修改告警提示框中声音切换按钮风格
4.报警受理列表，物联网设备列表增加安装位置【安装位置四合一，安装位置||回路号部件号||部件编码||楼号单元号房间号】
```

### 2018-11-9
```
@by yangpeng 
发版计划
v1.1.2  修改目前线上所遇到的一些Bug
v1.2.3  一些常规Bug修改
v1.2.3.2 常规Bug以及样式
v1.2    登录注册流程优化上线 2018-11-19号
v1.2.1  报警受理增加视频联动等修改 2018-11-21号
v1.3    增加预案管理模块
v1.4    重构gis模块
v1.5    重构视频模块
```


### 2018-11-9
```
@by yangpeng
1.批量导入中增加上传文件的loading以及增加对文件类型的判断
2.物联网设备，设备详情中取消采样频率与数据发送频率
```

### 2018-11-10
```
@by yangpeng
1.调消防设施系统联动(暂未成功)
2.物联网设备中增加了 '4','1','2','80','75'这些类型的部件，字典与部件一致
3.修改device_code与component_code的判断由0->-1, device_new.vue,detailsinfo_basedata.js
4.增加不同的报警提示音，【正常、火警、故障、异常】并将报警音修改为只播放一次音频
5.注释掉GIS入口【后端权限自己注释】 将GIS按钮的id都改成main-gis
6.增加报警受理中新报警来了之后取消之前的连接
7.修改维保系统模块中的loading
8.修改设备编辑过程中编辑编码改回路号的Bug
9.修改新增设备中的失败的提示信息
```

### 2018-11-11
```
@by yangpeng
1.修改报警历史中安装位置，将之前的部件位置修改成安装位置，显示方式与报警受理中相同。将默认为空的显示为'--'
2.修改告警历史中的翻页问题以及loading问题
3.报警受理中的loading修改
4.超时时间改成3min,
5.对回路部件公共处理函数中回路部件号小于0的处理
```


### 2018-11-12
```
@by yangpeng
上线版本：v1.2.3
更新内容：
  1.修复消防设施关联页面关联Bug
  2.对报警受理模块、物联网关联模块增加联网状态与设备状态
  3.将消火栓详情页面中产品状态修改为联网状态，另外增加了设备状态
  4.修改接口的原子封装
  5.去掉所有的暂未认证
  6.去掉GIS显示入口
  7.修改报警弹框的声音切换按钮已经增加不同状态报警声音的控制
  8.报警受理列表、报警历史列表增加了安装位置
  9.批量导入页面增加了文件上传的类型过滤已经上传loading
  10.物联网设备、设备详情、报警详情取消了采样频率与数据发送频率
  11.增加消防设施平面图的联动以及修复了了定位平面图图标不放大的问题
  12.物联网设备编辑页面新增加了'4','1','2','80','75'这些类型的部件，字典与部件一致
  13.报警受理模块中页面联动增加了新的报警到了之后取消之前正在请求的连接
  14.修复设备编辑页面中部件编码、回路号部件号、房间号楼号修改不生效的Bug
  15.新增设备编辑页面设备重复的提示信息
  16.修复报警历史中翻页问题以及loading问题
  17.修复报警受理中数据过多loading不全的问题
  18.将接口判断超时时间设置为3min
  19.对部件回路号部件号小于0的都显示--
```

### 2018-11-12
```
1.消防设施部件图中增加esmap
```

### 2018-11-13
```
1.修改安吉斯设备修改时不能修改回路号部件号的Bug Bug1902
2.增加设备类型 数传装置
3.修改分页数超出9999的Bug
4.取消萤石云的本地存token，每次请求从远程获取
```

### 2018-11-14
```
1.巡查报告导出的时候自动取消导出弹唱 BUG1924
2.修改批量上传时大于2M问题
3.维保任务指派增加指派时间
4.增加维保中失败的提示信息
5.新增头部的GIS入口
@by jingmingdong
1.修改物联网设备模块联网状态和设备状态 修改ui界面
2.修改报警受理模块联网状态和设备状态 修改ui界面
3.系统管理修改单位名称左上角跟着变问题修改
```
### 2018-11-15
```
@by jingmingdong 
1.解决bug   bugID 1926    报警历史 headers接口，在不同报警页面须手动刷新才会调表头筛选接口，才可有筛选项
2.IE下修改密码页面布局出现问题 进行修改
3.系统设置模块 完成
4.解决bug   bugID 1930  隐患历史数据重复问题解决
```

### 2018-11-19
```
1.视频语言对讲
2.更改进入系统的Bug
3.修改fromTime的Bug
```
### 2018-11-19
```
@by weiguifei 
1.批量导入新增安基斯 支持
```

### 2018-11-21
```
1.修改隐患历史模块筛选缺少company_id问题
2.修改报警受理中切换tab的时候带上筛选项的Bug (待测)
```


### 2018-11-21
```
@by weiguifei 
1.单位首页用户电话格式化修改
```


### 2018-11-26
```
@by jingmingdong
1.解决bug（bugID 1944 ,1953,1934 ）;
2.消防设施系统高度底部高度改成66px

@by wangkai
1.木星用户中心信息修改后用户在职离职状态变为暂无的修改 bug1958

@by yangpeng
1.Bug 单1931
2.Bug 单1883
3.Bug 单1884
4.修改打点标记不准的问题
5.增加告警历史中的视频详情跳转
```

### 2018-11-27
```
@by yangpeng
1.修复消防设施平面图图片变形问题,
2.bug 单1970
3.bug 1953
4.底层函数默认显示回路部件号
5.bug 1940

```

### 2018-11-27
```
上线 v1.2.4
```

### 2018-11-28
```
1.修改报警受理，告警历史中视频无处理按钮，无定位平面图按钮
2.告警受理统计自定义顺序
3.告警受理单位用户增加报警历史跳转
```

### 2018-12-05
```
@by 杨鹏
1.告警受理接口重构完成

2.消防设施系统图
```

### 2018-12-06
```
@by 杨鹏
1.推送到报警受理列表中的判断
2.gis接口Bug修改
```

### 2018-12-14
```
1.已上线通知公告、数字预案、单位建筑列表化
2.取消注册入口
3.开发...鼠标划上显示插件
```


### 2018-12-17
```
1.解决bug  bug单（2093、2013、1980）
```

### 2018-12-24
```
1.修改esmap的调用地址
```